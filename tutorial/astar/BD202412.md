# 百度之星 BD202412 括号

假设左括号多，我们需要翻转一个左括号。

对于一个匹配的括号序列，一定有对于任意前缀满足左括号数量不少于右括号数量。

设当前前缀左括号数量为$a$，右括号数量为$b$。

如果当前位置是左括号，并且满足$a - 1 \ge b + 1$，则说明对于当前缀可以进行一次翻转。

如果当前位置满足$a - 1 < b + 1$，则说明对于当前前缀中任意一个左括号都不能翻转。

我们可以遍历序列，如果当前可以翻转就`res++`，如果当前前缀不能翻转就`res=0`

对于需要翻转右括号的情况，只需要翻转序列的同时翻转括号，就转换为翻转左括号。

```cpp
#include <bits/stdc++.h>

using namespace std;

using i64 = long long;


int main() {
    ios::sync_with_stdio(false), cin.tie(nullptr);
    string s;
    cin >> s;
    int res = 0, a = 0, b = 0;
    if (count(s.begin(), s.end(), ')') * 2 > s.size()) {
        reverse(s.begin(), s.end());
        for (auto &c: s)
            c = c == '(' ? ')' : '(';
    }

    for (auto c: s) {
        if (c == '(') a++;
        else b++;

        if (c == '(' and a - 2 >= b) res++;
        if (a - 2 < b) res = 0;
    }
    cout << res;
    return 0;
}

```